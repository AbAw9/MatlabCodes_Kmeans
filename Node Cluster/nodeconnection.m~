% function S = nodeconnection(M,k)
clc
M=[0     0     1     1     0     1     0     1     0     0     0     0     0     1     0     0     0     1
   0     0     0     0     0     0     0     0     0     1     0     1     0     0     0     1     0     1
   1     0     0     0     0     0     0     0     1     0     1     0     1     0     1     0     1     1
   1     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0
   0     0     0     0     0     0     1     0     0     1     0     1     0     0     0     0     0     0
   1     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0
   0     0     0     0     1     0     0     0     0     0     0     1     0     0     0     1     0     0
   1     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0
   0     0     1     0     0     0     0     0     0     0     0     0     1     0     0     0     1     0
   0     1     0     0     1     0     0     0     0     0     0     1     0     0     0     0     0     1
   0     0     1     0     0     0     0     0     0     0     0     0     1     0     1     0     0     0
   0     1     0     0     1     0     1     0     0     1     0     0     0     0     0     1     0     0
   0     0     1     0     0     0     0     0     1     0     1     0     0     0     0     0     0     0
   1     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0
   0     0     1     0     0     0     0     0     0     0     1     0     0     0     0     0     0     0
   0     1     0     0     0     0     1     0     0     0     0     1     0     0     0     0     0     1
   0     0     1     0     0     0     0     0     1     0     0     0     0     0     0     0     0     0
   1     1     1     0     0     0     0     0     0     1     0     0     0     0     0     1     0     0];
k=12;

n=length(M);
Q=inf(1,n);Q(k)=0;
for j=1:n
    [X Y]=sort(Q);
    minp=Y(j);
    for m=1:n
        if(M(minp,m)~=0)&&(Q(m)>Q(minp)+M(minp,m))
            Q(m)=Q(minp)+M(minp,m);
        end
    end
end
Q
[




n = length(M);

pos = find(M(k,:)~=0)

P=zeros(n,n);

P(pos,:) = M(pos,:);

W=repmat(M(k,:),n,1);

S=sum(P.*W,2)